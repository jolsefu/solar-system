<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Mercury - Solar System</title>
    <meta name="description" content="Mercury Environment - A-Frame" />

    <!-- NES.css -->
    <link
      href="https://unpkg.com/nes.css@latest/css/nes.min.css"
      rel="stylesheet"
    />
    <!-- FONT -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />

    <!-- Main CSS Files -->
    <link rel="stylesheet" href="/src/styles/planet-environment.css" />

    <!-- AFrame -->
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>

    <!--
      https://github.com/handeyeco/aframe-star-system-component
    -->

    <!--
     Changed new THREE.Geometry() to use modern new THREE.BufferGeometry()

     Array Structure
     Old: stars.vertices.push(vector)
     New: positions[] setAttribute('position', new THREE.Float32BufferAttribute(...))

     Loop Structure
     Old: while (stars.vertices.length < count)
     New: for (let i = 0; i < count; i++)
    -->
    <script src="../aframe-star-system-component/bare_index.js"></script>

    <!--
      https://github.com/DougReeder/aframe-atoll-terrain
    -->
    <script src="https://unpkg.com/aframe-atoll-terrain@^1.0.0/dist/aframe-atoll-terrain.js"></script>

    <!--
      https://github.com/DougReeder/aframe-simple-sun-sky
    -->
    <script src="https://unpkg.com/aframe-simple-sun-sky@^1.2.3/simple-sun-sky.js"></script>
  </head>
  <body>
    <!-- Back Button -->
    <button
      id="back-btn"
      class="nes-btn is-primary"
      onclick="window.location.href='/'"
    >
      Back to Solar System
    </button>

    <!-- Planet Info Toggle Button -->
    <button id="planet-info-toggle" class="nes-btn is-primary planet-info-toggle">
      ℹ
    </button>

    <div class="planet-info">
      <h1>Mercury</h1>
      <p>Mercury is the smallest planet and sits closest to the Sun, appearing as a rocky, cratered world much like our Moon. Despite its proximity to solar heat, it isn't actually the hottest planet because it has almost no atmosphere to trap warmth. Its nighttime temperatures can plummet to a freezing minus 290 degrees Fahrenheit.</p>
      <button id="play-voiceover" class="nes-btn is-success">▶ Play Voiceover</button>
    </div>

    <script>
      // Planet info toggle
      const planetInfo = document.querySelector('.planet-info');
      const planetInfoToggle = document.getElementById('planet-info-toggle');

      planetInfoToggle.addEventListener('click', () => {
        planetInfo.classList.toggle('open');
        planetInfoToggle.classList.toggle('info-open');
      });

      // Voiceover functionality
      const voiceoverBtn = document.getElementById('play-voiceover');
      const voiceover = new Audio('/src/audio/Mercury.mp3');

      voiceoverBtn.addEventListener('click', () => {
        if (voiceover.paused) {
          voiceover.play();
          voiceoverBtn.textContent = '⏸ Pause Voiceover';
        } else {
          voiceover.pause();
          voiceoverBtn.textContent = '▶ Play Voiceover';
        }
      });

      voiceover.addEventListener('ended', () => {
        voiceoverBtn.textContent = '▶ Play Voiceover';
      });
    </script>    <a-scene>
      <!-- Camera -->
      <a-entity id="rig" position="0 5 0">
        <a-camera wasd-controls-enabled="false" look-controls>
          <a-cursor></a-cursor>
        </a-camera>
      </a-entity>

      <!-- Fog -->
      <a-scene fog="type: linear; color: #AAA"></a-scene>

      <!-- Sun -->
      <a-simple-sun-sky
        sun-position="0.7 0.4 -1"
        light-color="#000000"
        dark-color="#000000"
        fog-color="#000000"
        radius="10000"
      ></a-simple-sun-sky>
      <a-entity light="type: ambient; color: #BBB"></a-entity>
      <a-entity light="type: directional; color: #FFF; intensity: 0.6" position="0.7 0.4 -1"></a-entity>

      <!-- Sky  -->
      <!-- <a-sky color="black"></a-sky> -->
      <a-entity star-system="radius: 400;"></a-entity>

      <!-- Terrain  -->
      <a-atoll-terrain
        plateau-radius="50"
        plateau-elevation="5"
        elevation-bias="10"
        middle-radius="400"
        unit-size="4"
        far="10000"
        land-yin-color="#8b7355"
        land-yang-color="#a8917a"
        sea-yin-color="#8b7355"
        sea-yang-color="#a8917a"
      >
      </a-atoll-terrain>
    </a-scene>
  </body>
</html>
